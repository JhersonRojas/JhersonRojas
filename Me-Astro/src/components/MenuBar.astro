---
import {
  IconHome,
  IconPerson,
  IconCode,
  IconShare,
} from "../components/icons/global-icons";
import { cn } from "../libs/utils";
---

<aside
  class={cn(
    "w-min sm:w-min h-min p-2 fixed z-50 rounded",
    "bottom-[5%] sm:bottom-auto sm:top-[30%] left-[50%] translate-x-[-50%] sm:left-auto sm:right-0",
    "bg-custom-black-soft",
  )}
>
  <ul
    id="content-sections"
    class="text-white flex sm:grid gap-2 justify-center"
  >
    <a
      href="/"
      id="section-home"
      class="hover:bg-white hover:text-black p-4 transition-all rounded"
    >
      <IconHome />
    </a>
    <a
      href="/#about"
      id="section-about"
      class="hover:bg-white hover:text-black p-4 transition-all rounded"
    >
      <IconPerson />
    </a>
    <a
      href="/#skills"
      id="section-skills"
      class="hover:bg-white hover:text-black p-4 transition-all rounded"
    >
      <IconCode />
    </a>
    <a
      href="/#contact"
      id="section-contact"
      class="hover:bg-white hover:text-black p-4 transition-all rounded"
    >
      <IconShare />
    </a>
  </ul>
</aside>

<script>
  window.addEventListener("load", function () {
    chooseSection();
  });

  window.addEventListener("hashchange", function (event) {
    event.preventDefault();
    chooseSection();
  });

  const content = document.getElementById("content-sections")?.children;

  function chooseSection() {
    const hashed = window.location.hash.substring(1);

    const selectSection = document.getElementById(
      hashed ? `section-${hashed}` : "section-home",
    );

    selectSection?.classList.add("bg-white");
    selectSection?.classList.add("text-black");

    if (!content) return;

    for (let index = 0; index < content.length; index++) {
      const section = content[index];
      if (section !== selectSection) {
        section?.classList.remove("bg-white");
        section?.classList.remove("text-black");
      }
    }
  }
</script>
